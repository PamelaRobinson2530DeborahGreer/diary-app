<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>图标生成工具</title>
</head>
<body>
  <h1>Journal App 图标生成</h1>
  <div id="canvases"></div>
  <button onclick="downloadAll()">下载所有图标</button>

  <script>
    const sizes = [
      { size: 192, name: 'icon-192.png' },
      { size: 512, name: 'icon-512.png' },
      { size: 180, name: 'icon-180.png' }
    ];

    const canvasContainer = document.getElementById('canvases');

    sizes.forEach(({ size, name }) => {
      const canvas = document.createElement('canvas');
      canvas.width = size;
      canvas.height = size;
      canvas.style.border = '1px solid #ccc';
      canvas.style.margin = '10px';

      const ctx = canvas.getContext('2d');

      // 背景 - 品牌蓝
      ctx.fillStyle = '#3b82f6';
      const radius = size / 8; // 圆角
      roundRect(ctx, 0, 0, size, size, radius);
      ctx.fill();

      // "日" 字
      ctx.fillStyle = 'white';
      ctx.font = `700 ${size * 0.55}px system-ui, -apple-system, sans-serif`;
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('日', size / 2, size / 2);

      // 添加到页面
      const div = document.createElement('div');
      div.innerHTML = `<p>${name} (${size}x${size})</p>`;
      div.appendChild(canvas);
      canvasContainer.appendChild(div);

      // 存储 canvas 引用用于下载
      canvas.dataset.name = name;
    });

    function roundRect(ctx, x, y, width, height, radius) {
      ctx.beginPath();
      ctx.moveTo(x + radius, y);
      ctx.lineTo(x + width - radius, y);
      ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
      ctx.lineTo(x + width, y + height - radius);
      ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
      ctx.lineTo(x + radius, y + height);
      ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
      ctx.lineTo(x, y + radius);
      ctx.quadraticCurveTo(x, y, x + radius, y);
      ctx.closePath();
    }

    function downloadAll() {
      const canvases = document.querySelectorAll('canvas');
      canvases.forEach(canvas => {
        canvas.toBlob(blob => {
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = canvas.dataset.name;
          a.click();
          URL.revokeObjectURL(url);
        });
      });
    }
  </script>
</body>
</html>
